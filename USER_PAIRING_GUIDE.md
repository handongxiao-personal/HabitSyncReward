# ç”¨æˆ·é…å¯¹ä½¿ç”¨æŒ‡å—

## âœ¨ æ–°åŠŸèƒ½

1. **ç”¨æˆ·åç³»ç»Ÿ**ï¼šç™»å½•åè®¾ç½®ä¸ªæ€§åŒ–ç”¨æˆ·å
2. **é…å¯¹é‚€è¯·ç³»ç»Ÿ**ï¼šé€šè¿‡é‚®ç®±é‚€è¯·ä¼™ä¼´é…å¯¹
3. **æ•°æ®éš”ç¦»**ï¼šåªæœ‰é…å¯¹åæ‰èƒ½çœ‹åˆ°å¯¹æ–¹çš„æ•°æ®

## ğŸ“ å®Œæ•´ä½¿ç”¨æµç¨‹

### æ­¥éª¤ 1ï¼šFirebase é…ç½®

åœ¨ Firebase Console ä¸­æ›´æ–° Firestore å®‰å…¨è§„åˆ™ï¼š

```javascript
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // ç”¨æˆ·é…ç½®
    match /userprofiles/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && userId == request.auth.uid;
    }
    
    // é…å¯¹é‚€è¯·
    match /pairinvitations/{invitationId} {
      allow read: if request.auth != null;
      allow create: if request.auth != null;
      allow update: if request.auth != null && 
        (resource.data.fromUserId == request.auth.uid || 
         resource.data.toEmail == request.auth.token.email);
    }
    
    // é…å¯¹å…³ç³»
    match /userpairs/{userId} {
      allow read: if request.auth != null && userId == request.auth.uid;
      allow write: if request.auth != null && userId == request.auth.uid;
    }
    
    // ä»»åŠ¡æ•°æ®
    match /projects/{projectId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.resource.data.userId == request.auth.uid;
      allow delete: if request.auth != null && resource.data.userId == request.auth.uid;
    }
    
    // å¥–åŠ±æ•°æ®
    match /wishlists/{wishlistId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.resource.data.userId == request.auth.uid;
      allow delete: if request.auth != null && resource.data.userId == request.auth.uid;
    }
    
    // æ´»åŠ¨æ—¥å¿—
    match /activitylogs/{activityId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.resource.data.userId == request.auth.uid;
      allow delete: if request.auth != null && resource.data.userId == request.auth.uid;
    }
    
    // ç”¨æˆ·ç§¯åˆ†
    match /userscores/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && userId == request.auth.uid;
    }
  }
}
```

### æ­¥éª¤ 2ï¼šç”¨æˆ· A æ³¨å†Œå’Œè®¾ç½®

1. **æ‰“å¼€æµè§ˆå™¨**ï¼Œè®¿é—® `http://localhost:3003/`
2. **æ³¨å†Œè´¦å·**ï¼š
   - é‚®ç®±ï¼š`alice@example.com`
   - å¯†ç ï¼š`password123`
   - ç‚¹å‡»"æ³¨å†Œ"
3. **è®¾ç½®ç”¨æˆ·å**ï¼š
   - è¾“å…¥ç”¨æˆ·åï¼Œä¾‹å¦‚ï¼š`Alice`
   - ç‚¹å‡»"å®Œæˆè®¾ç½®"
4. **è¿›å…¥åº”ç”¨**ï¼Œä½ ä¼šçœ‹åˆ°ä¸»ç•Œé¢

### æ­¥éª¤ 3ï¼šç”¨æˆ· B æ³¨å†Œå’Œè®¾ç½®

1. **æ‰“å¼€æ— ç—•çª—å£**ï¼ˆCmd + Shift + Nï¼‰æˆ–å¦ä¸€ä¸ªæµè§ˆå™¨
2. è®¿é—® `http://localhost:3003/`
3. **æ³¨å†Œè´¦å·**ï¼š
   - é‚®ç®±ï¼š`bob@example.com`
   - å¯†ç ï¼š`password123`
   - ç‚¹å‡»"æ³¨å†Œ"
4. **è®¾ç½®ç”¨æˆ·å**ï¼š
   - è¾“å…¥ç”¨æˆ·åï¼Œä¾‹å¦‚ï¼š`Bob`
   - ç‚¹å‡»"å®Œæˆè®¾ç½®"

### æ­¥éª¤ 4ï¼šå‘é€é…å¯¹é‚€è¯·ï¼ˆç”¨æˆ· Aï¼‰

1. åœ¨ Alice çš„æµè§ˆå™¨ä¸­ï¼Œç‚¹å‡»é¡¶éƒ¨çš„ **"è®¾ç½®"** æ ‡ç­¾
2. åœ¨"é…å¯¹ç®¡ç†"åŒºåŸŸï¼Œç‚¹å‡» **"å‘é€é…å¯¹é‚€è¯·"** æŒ‰é’®
3. è¾“å…¥ Bob çš„é‚®ç®±ï¼š`bob@example.com`
4. ç‚¹å‡»"å‘é€é‚€è¯·"
5. çœ‹åˆ°æˆåŠŸæç¤ºï¼š"é‚€è¯·å·²å‘é€ï¼"

### æ­¥éª¤ 5ï¼šæ¥å—é…å¯¹é‚€è¯·ï¼ˆç”¨æˆ· Bï¼‰

1. åœ¨ Bob çš„æµè§ˆå™¨ä¸­ï¼Œç‚¹å‡» **"è®¾ç½®"** æ ‡ç­¾
2. åœ¨"æ”¶åˆ°çš„é‚€è¯·"åŒºåŸŸï¼Œçœ‹åˆ° Alice çš„é‚€è¯·
3. ç‚¹å‡» **"æ¥å—"** æŒ‰é’®
4. çœ‹åˆ°æˆåŠŸæç¤ºï¼š"å·²æ¥å— Alice çš„é…å¯¹é‚€è¯·ï¼"

### æ­¥éª¤ 6ï¼šå¼€å§‹ä½¿ç”¨

ç°åœ¨ä¸¤ä¸ªç”¨æˆ·éƒ½å·²é…å¯¹æˆåŠŸï¼

#### ç”¨æˆ· Aï¼ˆAliceï¼‰ï¼š
- åœ¨é¡¶éƒ¨çœ‹åˆ°ç”¨æˆ·åˆ‡æ¢å™¨ï¼š**[Alice]** å’Œ **[Bob]**
- å¯ä»¥åˆ‡æ¢æŸ¥çœ‹è‡ªå·±æˆ– Bob çš„ä»»åŠ¡å’Œå¥–åŠ±
- åˆ›å»ºçš„ä»»åŠ¡/å¥–åŠ±åªå±äºè‡ªå·±

#### ç”¨æˆ· Bï¼ˆBobï¼‰ï¼š
- åœ¨é¡¶éƒ¨çœ‹åˆ°ç”¨æˆ·åˆ‡æ¢å™¨ï¼š**[Bob]** å’Œ **[Alice]**
- å¯ä»¥åˆ‡æ¢æŸ¥çœ‹è‡ªå·±æˆ– Alice çš„ä»»åŠ¡å’Œå¥–åŠ±
- åˆ›å»ºçš„ä»»åŠ¡/å¥–åŠ±åªå±äºè‡ªå·±

## ğŸ¯ åŠŸèƒ½è¯´æ˜

### é…å¯¹å‰
- âœ… å¯ä»¥ç™»å½•å’Œè®¾ç½®ç”¨æˆ·å
- âœ… å¯ä»¥åˆ›å»ºè‡ªå·±çš„ä»»åŠ¡å’Œå¥–åŠ±
- âŒ çœ‹ä¸åˆ°ç”¨æˆ·åˆ‡æ¢å™¨
- âŒ æ— æ³•æŸ¥çœ‹å…¶ä»–äººçš„æ•°æ®

### é…å¯¹å
- âœ… é¡¶éƒ¨æ˜¾ç¤ºç”¨æˆ·ååˆ‡æ¢å™¨
- âœ… å¯ä»¥åˆ‡æ¢æŸ¥çœ‹è‡ªå·±å’Œä¼™ä¼´çš„æ•°æ®
- âœ… æ¯ä¸ªäººçš„æ•°æ®å®Œå…¨ç‹¬ç«‹
- âœ… å¯ä»¥åœ¨è®¾ç½®ä¸­å–æ¶ˆé…å¯¹

## ğŸ”„ å–æ¶ˆé…å¯¹

å¦‚æœéœ€è¦å–æ¶ˆé…å¯¹ï¼š

1. è¿›å…¥ **"è®¾ç½®"** æ ‡ç­¾
2. åœ¨"å·²é…å¯¹ä¼™ä¼´"åŒºåŸŸï¼Œç‚¹å‡» **"å–æ¶ˆé…å¯¹"** æŒ‰é’®
3. ç¡®è®¤æ“ä½œ
4. é…å¯¹å…³ç³»å°†è¢«è§£é™¤ï¼ŒåŒæ–¹éƒ½æ— æ³•å†çœ‹åˆ°å¯¹æ–¹çš„æ•°æ®

## ğŸ’¡ é‡è¦è¯´æ˜

### æ•°æ®éš”ç¦»
- æ¯ä¸ªç”¨æˆ·çš„ä»»åŠ¡ã€å¥–åŠ±å’Œç§¯åˆ†å®Œå…¨ç‹¬ç«‹
- é…å¯¹åªæ˜¯å…è®¸**æŸ¥çœ‹**å¯¹æ–¹çš„æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹å¯¹æ–¹çš„æ•°æ®
- åªèƒ½å®Œæˆè‡ªå·±çš„ä»»åŠ¡ï¼Œå…‘æ¢è‡ªå·±çš„å¥–åŠ±

### é‚€è¯·è§„åˆ™
- å¿…é¡»çŸ¥é“å¯¹æ–¹çš„æ³¨å†Œé‚®ç®±æ‰èƒ½å‘é€é‚€è¯·
- å¯¹æ–¹å¿…é¡»å…ˆæ³¨å†Œè´¦å·æ‰èƒ½æ”¶åˆ°é‚€è¯·
- æ¯æ¬¡åªèƒ½é…å¯¹ä¸€ä¸ªä¼™ä¼´
- å¯ä»¥éšæ—¶å–æ¶ˆé…å¯¹å¹¶é‡æ–°é…å¯¹å…¶ä»–äºº

### å®‰å…¨æ€§
- æ‰€æœ‰æ•°æ®éƒ½æœ‰ Firestore å®‰å…¨è§„åˆ™ä¿æŠ¤
- åªèƒ½è¯»å†™è‡ªå·±çš„æ•°æ®
- é…å¯¹é‚€è¯·éœ€è¦åŒæ–¹åŒæ„

## ğŸ¨ UI æ”¹è¿›

- âœ… æ ‡ç­¾é¡µæ”¹ä¸ºä¸­æ–‡ï¼šä»»åŠ¡ã€å¥–åŠ±ã€æ´»åŠ¨ã€è®¾ç½®
- âœ… ç”¨æˆ·åˆ‡æ¢å™¨æ˜¾ç¤ºç”¨æˆ·åè€Œä¸æ˜¯ ID
- âœ… æœªé…å¯¹æ—¶ä¸æ˜¾ç¤ºç”¨æˆ·åˆ‡æ¢å™¨
- âœ… è®¾ç½®é¡µé¢ä¸æ˜¾ç¤ºæµ®åŠ¨æŒ‰é’®
- âœ… ç™»å‡ºæŒ‰é’®åœ¨é¡µé¢å³ä¸Šè§’

## ğŸ› æ•…éšœæ’é™¤

### çœ‹ä¸åˆ°é‚€è¯·
- ç¡®ä¿å¯¹æ–¹å·²ç»æ³¨å†Œå¹¶ç™»å½•
- æ£€æŸ¥é‚®ç®±æ‹¼å†™æ˜¯å¦æ­£ç¡®
- åˆ·æ–°é¡µé¢é‡æ–°åŠ è½½æ•°æ®

### æ— æ³•å‘é€é‚€è¯·
- æ£€æŸ¥ Firestore å®‰å…¨è§„åˆ™æ˜¯å¦æ­£ç¡®é…ç½®
- ç¡®ä¿å·²å¯ç”¨ Email/Password è®¤è¯
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

### é…å¯¹åçœ‹ä¸åˆ°å¯¹æ–¹æ•°æ®
- ç¡®ä¿å¯¹æ–¹å·²ç»åˆ›å»ºäº†ä»»åŠ¡æˆ–å¥–åŠ±
- åˆ·æ–°é¡µé¢
- æ£€æŸ¥ç”¨æˆ·åˆ‡æ¢å™¨æ˜¯å¦æ­£ç¡®åˆ‡æ¢

