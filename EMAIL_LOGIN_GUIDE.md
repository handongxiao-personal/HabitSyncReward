# é‚®ç®±ç™»å½•ä½¿ç”¨æŒ‡å—

## ğŸ“§ è®¾ç½®æ­¥éª¤

### 1. åœ¨ Firebase Console ä¸­å¯ç”¨é‚®ç®±/å¯†ç è®¤è¯

1. è®¿é—® [Firebase Console](https://console.firebase.google.com/)
2. é€‰æ‹©ä½ çš„é¡¹ç›® `habitsyncreward`
3. åœ¨å·¦ä¾§èœå•ä¸­ï¼Œç‚¹å‡» **Authenticationï¼ˆèº«ä»½éªŒè¯ï¼‰**
4. ç‚¹å‡» **Sign-in methodï¼ˆç™»å½•æ–¹æ³•ï¼‰** æ ‡ç­¾
5. åœ¨ **Sign-in providers** åˆ—è¡¨ä¸­ï¼Œæ‰¾åˆ° **Email/Password**
6. ç‚¹å‡»å³ä¾§çš„ç¼–è¾‘å›¾æ ‡ï¼ˆé“…ç¬”ï¼‰
7. å¯ç”¨ **Email/Password** å¼€å…³
8. ç‚¹å‡» **ä¿å­˜**

### 2. ä½¿ç”¨åº”ç”¨

åˆ·æ–°æµè§ˆå™¨é¡µé¢ï¼Œä½ ä¼šçœ‹åˆ°ç™»å½•/æ³¨å†Œç•Œé¢ã€‚

## ğŸ‘¥ åŒç”¨æˆ·ä½¿ç”¨æ–¹æ³•

### æ–¹æ¡ˆ Aï¼šä¸¤ä¸ªæµè§ˆå™¨çª—å£ï¼ˆæ¨èï¼‰

1. **æµè§ˆå™¨ 1ï¼ˆç”¨æˆ·Aï¼‰**ï¼š
   - æ‰“å¼€ `http://localhost:3003/`
   - æ³¨å†Œè´¦å·ï¼šä¾‹å¦‚ `user1@example.com` / `password123`
   - ç™»å½•åå¯ä»¥åˆ›å»ºä»»åŠ¡å’Œå¥–åŠ±

2. **æµè§ˆå™¨ 2ï¼ˆç”¨æˆ·Bï¼‰**ï¼š
   - æ‰“å¼€**éšç§/æ— ç—•çª—å£**æˆ–å¦ä¸€ä¸ªæµè§ˆå™¨
   - è®¿é—® `http://localhost:3003/`
   - æ³¨å†Œè´¦å·ï¼šä¾‹å¦‚ `user2@example.com` / `password123`
   - ç™»å½•åå¯ä»¥åˆ›å»ºä»»åŠ¡å’Œå¥–åŠ±

### æ–¹æ¡ˆ Bï¼šåˆ‡æ¢è´¦å·

1. ä½¿ç”¨ç¬¬ä¸€ä¸ªé‚®ç®±ç™»å½•
2. åœ¨åº”ç”¨å³ä¸Šè§’æ‰¾åˆ°ç™»å‡ºæŒ‰é’®ï¼ˆå¦‚æœæœ‰ï¼‰
3. ç™»å‡ºåï¼Œç”¨ç¬¬äºŒä¸ªé‚®ç®±ç™»å½•

## ğŸ”‘ é‡è¦è¯´æ˜

### å½“å‰çš„é…å¯¹é€»è¾‘

ç›®å‰çš„é…å¯¹é€»è¾‘æ˜¯ï¼š
- ç”¨æˆ·Aç™»å½•åï¼Œ`currentUserId` = ç”¨æˆ·Açš„UID
- `otherUserId` = ç”¨æˆ·Açš„UID + "-partner"

è¿™æ„å‘³ç€ï¼š
- **ç”¨æˆ·Aå’Œç”¨æˆ·Bçœ‹åˆ°çš„ä¸æ˜¯å¯¹æ–¹çš„æ•°æ®**
- æ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®ç©ºé—´

### å¦‚æœä½ æƒ³è¦ä¸¤ä¸ªç”¨æˆ·å…±äº«æ•°æ®

éœ€è¦ä¿®æ”¹é…å¯¹é€»è¾‘ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ¡ˆï¼š

#### æ–¹æ¡ˆ1ï¼šå›ºå®šé…å¯¹
åœ¨ `src/services/auth.js` ä¸­ä¿®æ”¹ `generateUserIds` å‡½æ•°ï¼š

```javascript
export const generateUserIds = (currentUser) => {
  if (!currentUser) {
    return {
      currentUserId: 'user-demo-1',
      otherUserId: 'user-demo-2'
    };
  }
  
  // æ–¹æ¡ˆï¼šuser1@example.com å’Œ user2@example.com äº’ç›¸é…å¯¹
  const email = currentUser.email;
  if (email === 'user1@example.com') {
    return {
      currentUserId: currentUser.uid,
      otherUserId: 'åœ¨è¿™é‡Œå¡«user2çš„UID' // éœ€è¦å…ˆæ³¨å†Œuser2æ‰èƒ½çŸ¥é“UID
    };
  } else if (email === 'user2@example.com') {
    return {
      currentUserId: currentUser.uid,
      otherUserId: 'åœ¨è¿™é‡Œå¡«user1çš„UID'
    };
  }
  
  // é»˜è®¤ï¼šè‡ªå·±é…å¯¹è‡ªå·±çš„partner
  return {
    currentUserId: currentUser.uid,
    otherUserId: `${currentUser.uid}-partner`
  };
};
```

#### æ–¹æ¡ˆ2ï¼šåŠ¨æ€é…å¯¹ï¼ˆæ¨èï¼‰
åœ¨ Firebase ä¸­åˆ›å»ºä¸€ä¸ª `userPairs` é›†åˆï¼Œå­˜å‚¨é…å¯¹å…³ç³»ï¼š
```javascript
{
  user1UID: user2UID,
  user2UID: user1UID
}
```

## ğŸ“ ä½¿ç”¨æµç¨‹ç¤ºä¾‹

1. **æ³¨å†Œç”¨æˆ·1**ï¼š
   - é‚®ç®±ï¼š`alice@example.com`
   - å¯†ç ï¼š`password123`

2. **æ³¨å†Œç”¨æˆ·2**ï¼ˆåœ¨å¦ä¸€ä¸ªæµè§ˆå™¨ï¼‰ï¼š
   - é‚®ç®±ï¼š`bob@example.com`
   - å¯†ç ï¼š`password123`

3. **ä½¿ç”¨**ï¼š
   - Alice å¯ä»¥åˆ›å»ºä»»åŠ¡å’Œå¥–åŠ±
   - Bob å¯ä»¥åˆ›å»ºä»»åŠ¡å’Œå¥–åŠ±
   - ç›®å‰ä»–ä»¬çš„æ•°æ®æ˜¯ç‹¬ç«‹çš„

## ğŸ”§ è·å–ç”¨æˆ·UID

å¦‚æœéœ€è¦çŸ¥é“ç”¨æˆ·çš„UIDï¼ˆç”¨äºé…å¯¹ï¼‰ï¼š

1. ç™»å½•åï¼Œæ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°
2. æŸ¥çœ‹ç”¨æˆ·åˆ‡æ¢å™¨ä¸­æ˜¾ç¤ºçš„ç”¨æˆ·ID
3. æˆ–è€…åœ¨æ§åˆ¶å°è¾“å…¥ï¼š`firebase.auth().currentUser.uid`

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¯†ç è¦æ±‚**ï¼šè‡³å°‘6ä½
2. **é‚®ç®±æ ¼å¼**ï¼šå¿…é¡»æ˜¯æœ‰æ•ˆçš„é‚®ç®±æ ¼å¼
3. **æµ‹è¯•é‚®ç®±**ï¼šå¯ä»¥ä½¿ç”¨ä»»ä½•é‚®ç®±æ ¼å¼ï¼Œä¸éœ€è¦çœŸå®é‚®ç®±
4. **æ•°æ®éš”ç¦»**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªç”¨æˆ·çš„æ•°æ®æ˜¯éš”ç¦»çš„
5. **Firestoreè§„åˆ™**ï¼šç¡®ä¿å·²é…ç½®æ­£ç¡®çš„å®‰å…¨è§„åˆ™ï¼ˆè§ä¹‹å‰çš„è¯´æ˜ï¼‰

